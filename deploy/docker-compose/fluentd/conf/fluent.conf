<source>
  type forward
  port 24224
  bind 0.0.0.0
</source>

<match *.**>
  type copy
  <store>
    type stdout
  </store>
  <store>
    type elasticsearch
    host elasticsearch
    port 9200
    logstash_format true
    flush_interval 5s
  </store>
</match>

<match my.logs>
  @type elasticsearch
  host localhost
  port 9200
  index_name fluentd
  type_name fluentd
</match>

<filter logs.**>
  @type genhashvalue
  keys sessionid,requestid
  hash_type md5    # md5/sha1/sha256/sha512
  base64_enc true
  base91_enc false
  set_key _hash
  separator _
  inc_time_as_key true
  inc_tag_as_key true
</filter>